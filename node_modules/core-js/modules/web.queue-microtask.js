var $ = require('../internals/export');
var global = require('../internals/global');
var microtask = require('../internals/microtask');
<<<<<<< HEAD
var classof = require('../internals/classof-raw');

var process = global.process;
var isNode = classof(process) == 'process';
=======
var IS_NODE = require('../internals/engine-is-node');

var process = global.process;
>>>>>>> dea1f40603bd8c2fd2deb4cd684cf871afc501c3

// `queueMicrotask` method
// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-queuemicrotask
$({ global: true, enumerable: true, noTargetGet: true }, {
  queueMicrotask: function queueMicrotask(fn) {
<<<<<<< HEAD
    var domain = isNode && process.domain;
=======
    var domain = IS_NODE && process.domain;
>>>>>>> dea1f40603bd8c2fd2deb4cd684cf871afc501c3
    microtask(domain ? domain.bind(fn) : fn);
  }
});
