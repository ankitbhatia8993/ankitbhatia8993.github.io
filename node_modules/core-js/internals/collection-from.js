'use strict';
// https://tc39.github.io/proposal-setmap-offrom/
var aFunction = require('../internals/a-function');
var bind = require('../internals/function-bind-context');
var iterate = require('../internals/iterate');

module.exports = function from(source /* , mapFn, thisArg */) {
  var length = arguments.length;
  var mapFn = length > 1 ? arguments[1] : undefined;
<<<<<<< HEAD
  var mapping, A, n, boundFunction;
=======
  var mapping, array, n, boundFunction;
>>>>>>> dea1f40603bd8c2fd2deb4cd684cf871afc501c3
  aFunction(this);
  mapping = mapFn !== undefined;
  if (mapping) aFunction(mapFn);
  if (source == undefined) return new this();
<<<<<<< HEAD
  A = [];
=======
  array = [];
>>>>>>> dea1f40603bd8c2fd2deb4cd684cf871afc501c3
  if (mapping) {
    n = 0;
    boundFunction = bind(mapFn, length > 2 ? arguments[2] : undefined, 2);
    iterate(source, function (nextItem) {
<<<<<<< HEAD
      A.push(boundFunction(nextItem, n++));
    });
  } else {
    iterate(source, A.push, A);
  }
  return new this(A);
=======
      array.push(boundFunction(nextItem, n++));
    });
  } else {
    iterate(source, array.push, { that: array });
  }
  return new this(array);
>>>>>>> dea1f40603bd8c2fd2deb4cd684cf871afc501c3
};
