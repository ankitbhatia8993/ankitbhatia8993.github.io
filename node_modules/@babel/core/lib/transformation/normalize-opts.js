"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = normalizeOptions;

function _path() {
<<<<<<< HEAD
  const data = _interopRequireDefault(require("path"));
=======
  const data = require("path");
>>>>>>> dea1f40603bd8c2fd2deb4cd684cf871afc501c3

  _path = function () {
    return data;
  };

  return data;
}

<<<<<<< HEAD
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

=======
>>>>>>> dea1f40603bd8c2fd2deb4cd684cf871afc501c3
function normalizeOptions(config) {
  const {
    filename,
    cwd,
<<<<<<< HEAD
    filenameRelative = typeof filename === "string" ? _path().default.relative(cwd, filename) : "unknown",
    sourceType = "module",
    inputSourceMap,
    sourceMaps = !!inputSourceMap,
    moduleRoot,
    sourceRoot = moduleRoot,
    sourceFileName = _path().default.basename(filenameRelative),
=======
    filenameRelative = typeof filename === "string" ? _path().relative(cwd, filename) : "unknown",
    sourceType = "module",
    inputSourceMap,
    sourceMaps = !!inputSourceMap,
    sourceRoot = config.options.moduleRoot,
    sourceFileName = _path().basename(filenameRelative),
>>>>>>> dea1f40603bd8c2fd2deb4cd684cf871afc501c3
    comments = true,
    compact = "auto"
  } = config.options;
  const opts = config.options;
  const options = Object.assign({}, opts, {
    parserOpts: Object.assign({
<<<<<<< HEAD
      sourceType: _path().default.extname(filenameRelative) === ".mjs" ? "module" : sourceType,
=======
      sourceType: _path().extname(filenameRelative) === ".mjs" ? "module" : sourceType,
>>>>>>> dea1f40603bd8c2fd2deb4cd684cf871afc501c3
      sourceFileName: filename,
      plugins: []
    }, opts.parserOpts),
    generatorOpts: Object.assign({
      filename,
      auxiliaryCommentBefore: opts.auxiliaryCommentBefore,
      auxiliaryCommentAfter: opts.auxiliaryCommentAfter,
      retainLines: opts.retainLines,
      comments,
      shouldPrintComment: opts.shouldPrintComment,
      compact,
      minified: opts.minified,
      sourceMaps,
      sourceRoot,
      sourceFileName
    }, opts.generatorOpts)
  });

  for (const plugins of config.passes) {
    for (const plugin of plugins) {
      if (plugin.manipulateOptions) {
        plugin.manipulateOptions(options, options.parserOpts);
      }
    }
  }

  return options;
}